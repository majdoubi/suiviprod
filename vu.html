<meta http-equiv="Content-Type" content="text/html" meta charset="utf-8"  />
<html>
<head>
<link rel="stylesheet" href="style.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script type="text/javascript" src="jsSimpleDatePickr.2.1.js"></script>

<img src="Numalliance.jpeg" alt="logo" width="150px" height="50px"/> 
<title>SuiviProd</title>
<h1 class="parent">Monitoring application by Numalliance</h1>
</head>
<body>
<a href="http://localhost/chartt.json" target="_blank">Download</a>
<form>
  <input id="impression" name="impression" type="button" onclick="imprimer_page()" value="Print this page" />
</form>
<form action="api.php" method="post">
<meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<div >

<body>
<div class="time">
<p>From: <input type="text" id="datepicker1" name="datepicker1"></p>
<p> To : <input type="text" id="datepicker2" name="datepicker2"></p>
     <SELECT name="datefixe" size="1">
    <OPTION>Personalize 
    <OPTION>Today
    <OPTION>This week
    <OPTION>This month
    <OPTION>This year 
    </SELECT>
 

<INPUT TYPE="submit" NAME="submit" VALUE=" submit ">
</div>
</form>
<div style="width:40%">
<canvas id="myChart" width="100px" height="100px"></canvas></div>
<div class="radar" style="width:40%">
<canvas id="myRadar" width="100px" height="100px"></canvas></div>

<script>
$( function() {
    $( "#datepicker1" ).datepicker();
  } );
$( function() {
    $( "#datepicker2" ).datepicker();
  } );

var temp1 = "test";
var temp2 = "test2";
getText = function(url, callback) // How can I use this callback?
{
    var request = new XMLHttpRequest();
    request.onreadystatechange = function()
    {
        if (request.readyState == 4 && request.status == 200)
        {
            callback(request.responseText); // Another callback here
        }
    }; 
    request.open('GET', url);
    request.send();
}

function mycallback(data){  
	temp1 = JSON.parse(data) ;
dessin(0,temp1);
}
  
function mycallbacknom(datanom){  
	temp2 = JSON.parse(datanom) ; 
dessin(1,temp2);
}


getText('http://localhost/nom_de_pieceandnom_de_pieces.json',mycallback);

function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}   
//alert("temp1 = "+temp1);
//alert("temp2 = "+temp2);
//dessin(temp1,temp2);
var datanombre;
var datanom;
function dessin(int,datajsonnom){
	if (int == 0){
		data = datajsonnom;
		var tabdatanombre = [];
		   for (var i = 0; i < data.length; i++) {
   		tabdatanombre.push(data[i].value);  
		//alert(tabdatanombre);
							}

		console.log("tabdatanombre = "+tabdatanombre.value);
		var tabdatanom = [];
		   for (var i = 0; i < data.length; i++) {
   		tabdatanom.push(data[i].label);  
		//alert(tabdatanom);
		}
					
	}
	var ctx = document.getElementById("myChart");
	var myChart = new Chart(ctx, {

	    type: 'bar',
	    data: {
	        labels:tabdatanom,
		datasets: [{
		    label: '# Nombre de pieces produite ',
		    data: tabdatanombre,
		    backgroundColor: [
                'rgba(75, 192, 192, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]

	    },
	    options: {
			
		scales: {
		    yAxes: [{
		        ticks: {
		            beginAtZero:true
		        }
		    }]
		}
		
	    }
});
var ctxradar = document.getElementById("myRadar");
var myChart = new Chart(ctxradar, {

	    type: 'radar',
	    data: {
	        labels:tabdatanom,
		datasets: [{
		    label: '# Nombre de pieces produite',
		    data: tabdatanombre,
		    backgroundColor: [
                'rgba(75, 192, 192, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]

	    },
	    options: {
		scales: {
		    yAxes: [{
		        ticks: {
		            beginAtZero:true
		        }
		    }]
		}
	    }
});
}


//getText('http://localhost/fichier.json', mycallback);




function imprimer_page(){
  window.print();
}


 
 

</script>

</body>
</html>
